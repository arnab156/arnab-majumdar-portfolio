{"ast":null,"code":"import _toConsumableArray from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/arnab/Desktop/react-portfolio/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/arnab/Desktop/react-portfolio/src/pages/Search/Search.js\";\nimport React, { Component } from \"react\";\nimport Container from '../../components/Container/Container';\nimport SearchForm from '../../components/SearchForm/SearchForm';\nimport Card from '../../components/Card/card';\nimport ArticleScraped from '../../components/ArticleScraped/ArticleScraped';\nimport nytAPI from \"../../utils/nyt/API\";\nimport myAPI from \"../../utils/api/API\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Search)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      labels: [{\n        id: \"Topic\",\n        val: \"\"\n      }, {\n        id: \"Start Year\",\n        val: \"\"\n      }, {\n        id: \"End Year\",\n        val: \"\"\n      }],\n      results: [],\n      showResults: false,\n      error: \"\"\n    };\n\n    _this.handleInputChange = function (event, id) {\n      var labelIndex = _this.state.labels.findIndex(function (label) {\n        return label.id === id;\n      });\n\n      var label = _objectSpread({}, _this.state.labels[labelIndex]);\n\n      label.val = event.target.value;\n\n      var labels = _toConsumableArray(_this.state.labels);\n\n      labels[labelIndex] = label;\n\n      _this.setState({\n        labels: labels\n      });\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault(); // console.log(\"I am in handleform submit in searchjs line 32\") //working\n\n      nytAPI.getArticles(_this.state.labels[0].val, _this.state.labels[1].val, _this.state.labels[2].val).then(function (res) {\n        _this.setState({\n          labels: [{\n            id: \"Topic\",\n            val: \"\"\n          }, {\n            id: \"Start Year\",\n            val: \"\"\n          }, {\n            id: \"End Year\",\n            val: \"\"\n          }],\n          results: res.data.response.docs,\n          showResults: true\n        });\n      }).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.handleArticleSaved = function (event, id) {\n      event.preventDefault(); // console.log(\"inside the handle article saves in search js EVENT\", event);\n\n      var articleIndex = _this.state.results.findIndex(function (result) {\n        return result._id === id;\n      });\n\n      var article = _objectSpread({}, _this.state.results[articleIndex]);\n\n      console.log(\"inside the handle article saves in search js ID\", id, \" %%%article index%^%^^ \", articleIndex, \" %%5article%%% \", article);\n      myAPI.saveArticle({\n        title: article.headline.main,\n        author: article.source,\n        summary: article.snippet,\n        dateOfArticle: article.pub_date,\n        URL: article.web_url\n      }).then(function (res) {\n        return alert('Article saved successfully!');\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var searchResults = \"Enter all fields to search posts.\";\n\n      if (this.state.showResults) {\n        searchResults = this.state.results.map(function (article, index) {\n          return React.createElement(ArticleScraped, {\n            key: article._id,\n            articleId: article._id,\n            headline: article.headline.main,\n            author: article.source,\n            date: article.pub_date,\n            URL: article.web_url,\n            summary: article.snippet,\n            action: _this2.handleArticleSaved,\n            title: \"Save this article\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          });\n        });\n      }\n\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"Search for Articles\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(SearchForm, {\n        submit: this.handleFormSubmit,\n        changed: this.handleInputChange,\n        labels: this.state.labels,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })), React.createElement(Card, {\n        title: \"Top Results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, searchResults));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/arnab/Desktop/react-portfolio/src/pages/Search/Search.js"],"names":["React","Component","Container","SearchForm","Card","ArticleScraped","nytAPI","myAPI","Search","state","labels","id","val","results","showResults","error","handleInputChange","event","labelIndex","findIndex","label","target","value","setState","handleFormSubmit","preventDefault","getArticles","then","res","data","response","docs","catch","err","message","handleArticleSaved","articleIndex","result","_id","article","console","log","saveArticle","title","headline","main","author","source","summary","snippet","dateOfArticle","pub_date","URL","web_url","alert","searchResults","map","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Container from '../../components/Container/Container';\nimport SearchForm from '../../components/SearchForm/SearchForm';\nimport Card from '../../components/Card/card';\nimport ArticleScraped from '../../components/ArticleScraped/ArticleScraped';\nimport nytAPI from \"../../utils/nyt/API\";\nimport myAPI from \"../../utils/api/API\";\n\nclass Search extends Component {\n  state = {\n    labels: [\n      { id: \"Topic\", val: \"\" },\n      { id: \"Start Year\", val: \"\" },\n      { id: \"End Year\", val: \"\" }\n    ],\n    results: [],\n    showResults: false,\n    error: \"\"\n  }\n\n  handleInputChange = ( event, id ) => {\n    const labelIndex = this.state.labels.findIndex(label => label.id === id);\n    const label = { ...this.state.labels[labelIndex] };\n    label.val = event.target.value;\n    const labels = [ ...this.state.labels ];\n    labels[labelIndex] = label;\n    this.setState({ labels: labels });\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    // console.log(\"I am in handleform submit in searchjs line 32\") //working\n    nytAPI.getArticles(this.state.labels[0].val, this.state.labels[1].val, this.state.labels[2].val)\n      .then(res => {\n        this.setState({ \n          labels: [\n            { id: \"Topic\", val: \"\" },\n            { id: \"Start Year\", val: \"\" },\n            { id: \"End Year\", val: \"\" }\n          ],\n          results: res.data.response.docs,\n          showResults: true \n        });\n      })\n      .catch(err => this.setState({ error: err.message }));\n  } \n\n  handleArticleSaved = ( event, id ) => {\n    event.preventDefault();\n    // console.log(\"inside the handle article saves in search js EVENT\", event);\n    \n    const articleIndex = this.state.results.findIndex(result => result._id === id);\n    const article = { ...this.state.results[articleIndex] };\n    console.log(\"inside the handle article saves in search js ID\", id, \" %%%article index%^%^^ \",articleIndex, \" %%5article%%% \", article);\n    myAPI.saveArticle({\n      title: article.headline.main,\n      author: article.source,\n      summary: article.snippet,\n      dateOfArticle: article.pub_date,\n      URL: article.web_url\n    })\n      .then(res => alert('Article saved successfully!'))\n      .catch(err => console.log(err));\n  }\n\n  render() {\n    let searchResults = \"Enter all fields to search posts.\";\n    if (this.state.showResults) {\n      searchResults = this.state.results.map((article, index) => {\n        return <ArticleScraped\n          key={article._id}\n          articleId={article._id}\n          headline={article.headline.main}\n          author={article.source}\n          date={article.pub_date}\n          URL={article.web_url}\n          summary={article.snippet}\n          action={this.handleArticleSaved}\n          title=\"Save this article\" />\n      });\n    }\n    return (\n      <Container>\n        <Card title=\"Search for Articles\">\n        <SearchForm \n          submit={this.handleFormSubmit} \n          changed={this.handleInputChange}\n          labels={this.state.labels} />\n        </Card>\n        <Card title=\"Top Results\">{searchResults}</Card>\n      </Container>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}